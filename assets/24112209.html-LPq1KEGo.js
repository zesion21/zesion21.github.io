import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,o as a,b as e}from"./app-CFuNIExP.js";const t="/assets/image-5-QKYG224U.png",n="/assets/image-6-CNIrDacW.png",l={},h=e('<h1 id="ubuntu-挂载硬盘-和-搭建-samba-服务" tabindex="-1"><a class="header-anchor" href="#ubuntu-挂载硬盘-和-搭建-samba-服务"><span>ubuntu 挂载硬盘 和 搭建 Samba 服务</span></a></h1><h3 id="一、挂载硬盘" tabindex="-1"><a class="header-anchor" href="#一、挂载硬盘"><span>一、挂载硬盘</span></a></h3><h4 id="手动临时挂载分区" tabindex="-1"><a class="header-anchor" href="#手动临时挂载分区"><span>手动临时挂载分区</span></a></h4><ol><li>获取硬盘列表</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> fdisk</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> -l</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+t+`" alt=" " tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="2"><li>使用设备名称挂载</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> mkdir</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> -p</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> /media/disk0</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> mount</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> /dev/sda1</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;">  /media/disk0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="开机自动挂载" tabindex="-1"><a class="header-anchor" href="#开机自动挂载"><span>开机自动挂载</span></a></h4><p>为防止名称的变化，使用 UUID 挂载硬盘</p><ol><li>获取分区的 UUID</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">lsblk</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> -o</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> name,UUID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="`+n+`" alt=" " tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol start="2"><li>编辑 <code>/etc/fstab</code></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">/dev/disk/by-uuid/7b1f4030-387b-f34c-8f80-727dcf85a853</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;">  /media/disk0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="二、搭建-samba-服务" tabindex="-1"><a class="header-anchor" href="#二、搭建-samba-服务"><span>二、搭建 Samba 服务</span></a></h3><ol><li>安装 Samba</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> apt</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> install</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> samba</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>创建共享目录 并 设置权限</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> mkdir</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> -p</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> /srv/samba/shared</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> chown</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> nobody:nogroup</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> /srv/samba/shared</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> chmod</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> 2775</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> /srv/samba/shared</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>配置 Samba <code>sudo vim /etc/samba/smb.conf</code></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;">[shared]</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">   path</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> =</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> /srv/samba/shared</span><span style="--shiki-dark:#88846F;--shiki-light:#A0A1A7;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic;"> # 路径</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">   browsable</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> =</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> yes</span><span style="--shiki-dark:#88846F;--shiki-light:#A0A1A7;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic;">  # 是否允许在网络邻居中浏览此共享。</span></span>
<span class="line"><span style="--shiki-dark:#66D9EF;--shiki-light:#0184BC;">   read</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> only</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> =</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> no</span><span style="--shiki-dark:#88846F;--shiki-light:#A0A1A7;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic;"> # 是否只读</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">   guest</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> ok</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> =</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> no</span><span style="--shiki-dark:#88846F;--shiki-light:#A0A1A7;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic;"> # 是否允许匿名访问</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">   create</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> mask</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> =</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> 0775</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">   directory</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> mask</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> =</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> 0775</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>Samba 用户配置</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">adduser</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> your_username</span><span style="--shiki-dark:#88846F;--shiki-light:#A0A1A7;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic;"> #添加用户 用已经存在用户的跳过此步骤</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">smbpasswd</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> -a</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> your_username</span><span style="--shiki-dark:#88846F;--shiki-light:#A0A1A7;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic;">  # 设置smb访问密码</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">smbpasswd</span><span style="--shiki-dark:#AE81FF;--shiki-light:#986801;"> -e</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> your_username</span><span style="--shiki-dark:#88846F;--shiki-light:#A0A1A7;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic;">  # 启用用户</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>重启 Samba 服务</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> systemctl</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> restart</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> smbd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="6"><li>开启防火墙的需要添加规则</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">sudo</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> ufw</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> allow</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> samba</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="7"><li>解决 windows 不能连接的问题</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA;"><pre class="shiki shiki-themes monokai one-light vp-code"><code><span class="line"><span style="--shiki-dark:#88846F;--shiki-light:#A0A1A7;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic;"># 禁用访客</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">usershare</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> allow</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> guests</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> =</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> no</span></span>
<span class="line"><span style="--shiki-dark:#A6E22E;--shiki-light:#4078F2;">map</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> to</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> guest</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> =</span><span style="--shiki-dark:#E6DB74;--shiki-light:#50A14F;"> never</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h4><ol><li><a href="https://www.bilibili.com/opus/1000689957920047113" target="_blank" rel="noopener noreferrer">Ubuntu 22.04 上快速搭建 Samba 文件共享服务器</a></li><li><a href="https://zhuanlan.zhihu.com/p/689077877" target="_blank" rel="noopener noreferrer">解决 Win10 / 11 客户机无法访问 Samba 服务器的问题</a></li></ol>`,32),k=[h];function r(d,p){return a(),s("div",null,k)}const c=i(l,[["render",r],["__file","24112209.html.vue"]]),m=JSON.parse('{"path":"/article/server/2024/24112209.html","title":"ubuntu 挂载硬盘 和 搭建 Samba 服务","lang":"zh-CN","frontmatter":{"date":"2024-11-22T00:00:00.000Z","categories":["Linux","Server"],"tags":["ubuntu"],"description":"ubuntu 挂载硬盘 和 搭建 Samba 服务 一、挂载硬盘 手动临时挂载分区 获取硬盘列表 使用设备名称挂载 开机自动挂载 为防止名称的变化，使用 UUID 挂载硬盘 获取分区的 UUID 编辑 /etc/fstab 二、搭建 Samba 服务 安装 Samba 创建共享目录 并 设置权限 配置 Samba sudo vim /etc/samba...","head":[["meta",{"property":"og:url","content":"http://zesionlee.cn/article/server/2024/24112209.html"}],["meta",{"property":"og:site_name","content":"全栈笔记"}],["meta",{"property":"og:title","content":"ubuntu 挂载硬盘 和 搭建 Samba 服务"}],["meta",{"property":"og:description","content":"ubuntu 挂载硬盘 和 搭建 Samba 服务 一、挂载硬盘 手动临时挂载分区 获取硬盘列表 使用设备名称挂载 开机自动挂载 为防止名称的变化，使用 UUID 挂载硬盘 获取分区的 UUID 编辑 /etc/fstab 二、搭建 Samba 服务 安装 Samba 创建共享目录 并 设置权限 配置 Samba sudo vim /etc/samba..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-22T03:51:08.000Z"}],["meta",{"property":"article:author","content":"阿琛"}],["meta",{"property":"article:tag","content":"ubuntu"}],["meta",{"property":"article:published_time","content":"2024-11-22T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-22T03:51:08.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ubuntu 挂载硬盘 和 搭建 Samba 服务\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-22T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-22T03:51:08.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"阿琛\\",\\"url\\":\\"http://zesionlee.cn\\"}]}"]]},"headers":[{"level":3,"title":"一、挂载硬盘","slug":"一、挂载硬盘","link":"#一、挂载硬盘","children":[]},{"level":3,"title":"二、搭建 Samba 服务","slug":"二、搭建-samba-服务","link":"#二、搭建-samba-服务","children":[]}],"git":{"createdTime":1732247468000,"updatedTime":1732247468000,"contributors":[{"name":"zesionlee","email":"39211025+zesion21@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":1.15,"words":344},"filePathRelative":"article/server/2024/24112209.md","localizedDate":"2024年11月22日","excerpt":"\\n<h3>一、挂载硬盘</h3>\\n<h4>手动临时挂载分区</h4>\\n<ol>\\n<li>获取硬盘列表</li>\\n</ol>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-dark:#F8F8F2;--shiki-light:#383A42;--shiki-dark-bg:#272822;--shiki-light-bg:#FAFAFA\\"><pre class=\\"shiki shiki-themes monokai one-light vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-dark:#A6E22E;--shiki-light:#4078F2\\">sudo</span><span style=\\"--shiki-dark:#E6DB74;--shiki-light:#50A14F\\"> fdisk</span><span style=\\"--shiki-dark:#AE81FF;--shiki-light:#986801\\"> -l</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{c as comp,m as data};
