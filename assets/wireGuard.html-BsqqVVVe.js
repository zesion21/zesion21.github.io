import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a,o as n}from"./app-DQ5ndBT9.js";const l={};function t(r,i){return n(),e("div",null,[...i[0]||(i[0]=[a(`<h3 id="_1-install-wireguard" tabindex="-1"><a class="header-anchor" href="#_1-install-wireguard"><span>1. Install WireGuard</span></a></h3><p>Reference: <a href="https://www.wireguard.com/install/" target="_blank" rel="noopener noreferrer">https://www.wireguard.com/install/</a></p><ol><li><p>Windows Version Download Link: <a href="https://download.wireguard.com/windows-client/" target="_blank" rel="noopener noreferrer">https://download.wireguard.com/windows-client/</a></p></li><li><p>Ubuntu (Debian) Installation:</p></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wireguard</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-server-configuration" tabindex="-1"><a class="header-anchor" href="#_2-server-configuration"><span>2. Server Configuration</span></a></h3><ol><li>Generate server key pair</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> umask</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 077</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> genkey</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/wireguard/privatekey</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pubkey</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/wireguard/publickey</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>Create server configuration file <code>/etc/wireguard/wg0.conf</code></li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[Interface]</span></span>
<span class="line"><span>Address = 172.16.10.1/24</span></span>
<span class="line"><span>ListenPort = 5555</span></span>
<span class="line"><span>PrivateKey = &lt;server-private-key&gt;</span></span>
<span class="line"><span>PostUp = iptables -I FORWARD 1 -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT; iptables -I FORWARD 2 -i %i -j ACCEPT; iptables -t nat -I POSTROUTING 1 -s 172.16.10.0/24 -o eth0 -j MASQUERADE</span></span>
<span class="line"><span>PostDown = iptables -D FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT; iptables -D FORWARD -i %i -j ACCEPT; iptables -t nat -D POSTROUTING -s 172.16.10.0/24 -o eth0 -j MASQUERADE</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Peer]</span></span>
<span class="line"><span># This is the information for peer VPS-A</span></span>
<span class="line"><span># Fill this in after generating the public key on VPS-A</span></span>
<span class="line"><span>PublicKey = &lt;client-public-key&gt;</span></span>
<span class="line"><span># Private IP address assigned to VPS-A</span></span>
<span class="line"><span>AllowedIPs = 172.16.10.2/32</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Enable IP forwarding: To allow the server to forward client traffic, enable kernel IP forwarding</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;net.ipv4.ip_forward=1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/sysctl.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="4"><li>If you have a firewall, configure it</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sudo ufw allow 51820/udp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="5"><li>Start WireGuard service</li></ol><p>Use the <code>wg-quick</code> tool to start the configured <code>wg0</code> interface and enable auto-start at boot</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sudo systemctl enable wg-quick@wg0 --now</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Check service status and interface:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wg-quick@wg0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> show</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-client-configuration" tabindex="-1"><a class="header-anchor" href="#_3-client-configuration"><span>3. Client Configuration</span></a></h3><ol><li>Create client key pair</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> genkey</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> client-private.key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pubkey</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">client-public.key</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>Add client to server configuration (already added), add multiple <code>[Peer]</code> sections for multiple clients</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[Peer]</span></span>
<span class="line"><span>PublicKey = &lt;client-public-key&gt;</span></span>
<span class="line"><span>AllowedIPs = 10.0.0.2/32</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Create client configuration file</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[Interface]</span></span>
<span class="line"><span>PrivateKey = &lt;client-private-key&gt;</span></span>
<span class="line"><span>Address = 172.16.10.2/24</span></span>
<span class="line"><span>DNS = 114.114.114.114</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Peer]</span></span>
<span class="line"><span>Endpoint = 192.168.10.13:5555</span></span>
<span class="line"><span>PublicKey = &lt;server-public-key&gt;</span></span>
<span class="line"><span>AllowedIPs = 172.16.10.0/24</span></span>
<span class="line"><span>PersistentKeepalive = 25</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-common-issues" tabindex="-1"><a class="header-anchor" href="#_4-common-issues"><span>4. Common Issues:</span></a></h3><ol><li><code>iptables: command not found</code> :<br><code>sudo apt install iptables</code></li></ol><div class="hint-container info"><p class="hint-container-title">AI Translation | AI 翻译</p><p>This article was translated from Chinese to English by AI. If there are any inaccuracies, please refer to the original Chinese version.<br><br><br> 本文由 AI 辅助从中文翻译为英文。如遇不准确之处，请以中文原版为准。</p></div>`,28)])])}const p=s(l,[["render",t]]),o=JSON.parse('{"path":"/en/article/server/2026/wireGuard.html","title":"Building a Local Area Network with WireGuard","lang":"en-US","frontmatter":{"title":"Building a Local Area Network with WireGuard","date":"2026-02-25T00:00:00.000Z","tags":["windows","linux"],"categories":["Server"],"description":"1. Install WireGuard Reference: https://www.wireguard.com/install/ Windows Version Download Link: https://download.wireguard.com/windows-client/ Ubuntu (Debian) Installation: 2....","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Building a Local Area Network with WireGuard\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2026-02-25T00:00:00.000Z\\",\\"dateModified\\":\\"2026-02-25T10:20:20.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"阿琛\\",\\"url\\":\\"http://zesionlee.cn\\"}]}"],["meta",{"property":"og:url","content":"http://zesionlee.cn/en/article/server/2026/wireGuard.html"}],["meta",{"property":"og:title","content":"Building a Local Area Network with WireGuard"}],["meta",{"property":"og:description","content":"1. Install WireGuard Reference: https://www.wireguard.com/install/ Windows Version Download Link: https://download.wireguard.com/windows-client/ Ubuntu (Debian) Installation: 2...."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-25T10:20:20.000Z"}],["meta",{"property":"article:tag","content":"linux"}],["meta",{"property":"article:tag","content":"windows"}],["meta",{"property":"article:published_time","content":"2026-02-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-25T10:20:20.000Z"}],["link",{"rel":"alternate","hreflang":"zh-cn","href":"http://zesionlee.cn/article/server/2026/wireGuard.html"}]]},"git":{"createdTime":1772000831000,"updatedTime":1772014820000,"contributors":[{"name":"zesion21","username":"zesion21","email":"39211025+zesion21@users.noreply.github.com","commits":2,"url":"https://github.com/zesion21"}]},"readingTime":{"minutes":1.31,"words":392},"filePathRelative":"en/article/server/2026/wireGuard.md","excerpt":"<h3>1. Install WireGuard</h3>\\n<p>Reference: <a href=\\"https://www.wireguard.com/install/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://www.wireguard.com/install/</a></p>\\n<ol>\\n<li>\\n<p>Windows Version Download Link: <a href=\\"https://download.wireguard.com/windows-client/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://download.wireguard.com/windows-client/</a></p>\\n</li>\\n<li>\\n<p>Ubuntu (Debian) Installation:</p>\\n</li>\\n</ol>","autoDesc":true}');export{p as comp,o as data};
